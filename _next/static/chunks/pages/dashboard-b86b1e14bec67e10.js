(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8026],{40528:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(8081)}])},8081:function(e,n,a){"use strict";a.r(n);var r=a(47568),s=a(7297),t=a(70655),c=a(85893),i=a(55850),o=a(17283),d=a(69077),l=a(77849),u=a(45682),h=a(89496),b=a(935),_=a.n(b),p=a(67294),x=a(2593),v=a(21046),m=a(61952),f=a(4798);function j(){var e=(0,s.Z)(["\n        query($owner: String) {\n            projects(\n                where: {owner: $owner}\n                orderBy: createdAt\n                orderDirection: desc\n                first: 1\n            ) {\n                id\n                name\n                reportLink\n                status\n                spendings {\n                    amount\n                    provider {\n                        id\n                    }\n                    kind\n                    name\n                }\n                descriptionLink\n                budget\n            }\n        }\n    "]);return j=function(){return e},e}n.default=function(){var e=(0,p.useState)(!0),n=e[0],a=e[1],s=(0,d.mA)().address,b=(0,d.mx)().data,N=(0,d.yL)(),g=(0,d.cq)({address:l.iF.workflow,abi:l._p.workflow,signerOrProvider:b}),w=(0,d.cq)({address:l.iF.onx,abi:l._p.onx,signerOrProvider:b}),C=(0,d.cq)({address:l.iF.usdt,abi:l._p.usdt,signerOrProvider:b}),y=(0,d.cq)({address:l.iF.usdt,abi:l._p.usdt,signerOrProvider:N}),T=(0,d.cq)({address:l.iF.onx,abi:l._p.onx,signerOrProvider:N}),O=(0,p.useState)(),P=(O[0],O[1]),S=(0,p.useState)(),B=S[0],E=S[1],A=(0,p.useState)(),D=(A[0],A[1]),I=(0,p.useState)(),Z=I[0],k=I[1],U=(0,p.useState)(),W=U[0],F=U[1],q=(0,p.useState)(),z=q[0],G=q[1],R=(0,p.useState)(0),L=R[0],H=R[1];(0,p.useEffect)((function(){var e=[];e.push(y.decimals().then((function(e){P(x.O$.from(10).pow(e))}))),e.push(T.decimals().then((function(e){E(x.O$.from(10).pow(e))}))),e.push(y.balanceOf(s).then((function(e){D(e)}))),e.push(T.balanceOf(s).then((function(e){k(e)}))),Promise.all(e).then((function(){a(!1)}))}),[s,L]);var V=(0,i.a)((0,o.Ps)(j()),{variables:{owner:null===s||void 0===s?void 0:s.toLowerCase()}}),X=(V.data,V.refetch,function(){var e=(0,r.Z)((function(e){var n,r;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:e.preventDefault(),a(!0),t.label=1;case 1:return t.trys.push([1,8,9,10]),console.log("Get allowance"),[4,y.allowance(s,g.address)];case 2:return n=t.sent(),console.log("Allowance is",n.toString()),n.lt(v.Bz)?(console.log("Approve USDT"),[4,C.approve(g.address,v.Bz)]):[3,5];case 3:return[4,t.sent().wait()];case 4:t.sent(),console.log("USDT Approved"),t.label=5;case 5:return console.log("Buy ONx"),[4,g.buyONx(B.mul(1e6*W).div(1e6))];case 6:return[4,t.sent().wait()];case 7:return t.sent(),console.log("ONx bought"),F(void 0),H(L+1),[3,10];case 8:if(r=t.sent(),!(0,u.y)(r))throw r;return[3,10];case 9:return a(!1),[7];case 10:return[2]}}))}));return function(n){return e.apply(this,arguments)}}()),$=function(){var e=(0,r.Z)((function(e){var n;return(0,t.__generator)(this,(function(r){switch(r.label){case 0:e.preventDefault(),a(!0),r.label=1;case 1:return r.trys.push([1,8,9,10]),[4,T.allowance(s,g.address)];case 2:return r.sent().lt(v.Bz)?[4,w.approve(g.address,v.Bz)]:[3,5];case 3:return[4,r.sent().wait()];case 4:r.sent(),r.label=5;case 5:return[4,g.sellONx(B.mul(1e6*z).div(1e6))];case 6:return[4,r.sent().wait()];case 7:return r.sent(),G(void 0),H(L+1),[3,10];case 8:if(n=r.sent(),!(0,u.y)(n))throw n;return[3,10];case 9:return a(!1),[7];case 10:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),J=(0,p.useState)(0),Q=J[0],M=J[1],K=function(e){M(e)};return(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:_().wrapper,children:[(0,c.jsx)(h.Z,{}),(0,c.jsxs)("div",{children:[(0,c.jsx)(m.Z,{type:"dashboard",transactionInProcess:n}),(0,c.jsxs)("div",{className:_().mainWrapper,children:[(0,c.jsx)("div",{className:_().balance,children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:_().balanceImage}),(0,c.jsx)("h3",{className:_().balanceTitle,children:"\u0411\u0430\u043b\u0430\u043d\u0441 ONx"}),(0,c.jsxs)("div",{className:_().balanceAmount,children:[(0,c.jsx)("div",{className:_().balanceAmountImage,children:(0,c.jsx)("img",{src:"/currency.svg",alt:"Currency"})}),(0,c.jsx)("p",{className:_().balanceAmountText,children:B&&Z&&(null===Z||void 0===Z?void 0:Z.mul(100).div(B).toNumber())/100})]}),(0,c.jsx)("div",{className:_().buttonPlace,children:(0,c.jsx)(f.ZP,{content:"\u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435",children:(0,c.jsx)("button",{className:_().fuctionCurrecy,children:" \u0424\u0443\u043d\u043a\u0446\u0456\u0457 \u0432\u0430\u043b\u044e\u0442\u0438  "})})})]})}),(0,c.jsxs)("div",{className:_().doBalance,children:[(0,c.jsxs)("div",{className:_().tabs,children:[(0,c.jsx)("div",{className:"".concat(_().tab," ").concat(0===Q?"":_().active),onClick:function(){return K(0)},children:(0,c.jsx)("p",{className:_().tabText,children:"\u041f\u0440\u0438\u0434\u0431\u0430\u0442\u0438 ONx"})}),(0,c.jsx)("div",{className:"".concat(_().tab," ").concat(1===Q?"":_().active),onClick:function(){return K(1)},children:(0,c.jsx)("p",{className:_().tabText,children:"\u041f\u0440\u043e\u0434\u0430\u0442\u0438 ONx"})})]}),0===Q&&(0,c.jsxs)("div",{className:_().doBalanceContent,children:[(0,c.jsx)("p",{className:_().doBalanceContentText,children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c ONx"}),(0,c.jsx)("form",{className:_().form,children:(0,c.jsxs)("div",{className:_().inputContainer,children:[(0,c.jsx)("input",{className:_().balanceDoInput,type:"number",placeholder:"0.00",value:W,onChange:function(e){var n=e.target.value;F(Number(n))}}),(0,c.jsx)("div",{className:_().doBalanceCurrency,children:(0,c.jsx)("img",{src:"/currency.svg",alt:"Currency"})}),(0,c.jsxs)("div",{className:_().downWrapper,children:[(0,c.jsxs)("button",{onClick:X,children:[(0,c.jsx)("div",{}),(0,c.jsx)("p",{children:"\u041f\u0440\u0438\u0434\u0431\u0430\u0442\u0438 ONx"})]}),(0,c.jsx)(f.ZP,{content:"\u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"\u0426\u0456\u043d\u0430"}),(0,c.jsx)("p",{children:"0.00  USDT"})]})})]})]})})]}),1===Q&&(0,c.jsxs)("div",{className:_().doBalanceContent,children:[(0,c.jsx)("p",{className:_().doBalanceContentText,children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c ONx"}),(0,c.jsx)("form",{className:_().form,children:(0,c.jsxs)("div",{className:_().inputContainer,children:[(0,c.jsx)("input",{className:_().balanceDoInput,type:"number",placeholder:"0.00",value:z,onChange:function(e){var n=e.target.value;G(Number(n))}}),(0,c.jsx)("div",{className:_().doBalanceCurrency,children:(0,c.jsx)("img",{src:"/currency.svg",alt:"Currency"})}),(0,c.jsxs)("div",{className:_().downWrapper,children:[(0,c.jsxs)("button",{onClick:$,children:[(0,c.jsx)("div",{}),(0,c.jsx)("p",{children:"\u041f\u0440\u043e\u0434\u0430\u0442\u0438 ONx"})]}),(0,c.jsx)(f.ZP,{content:"\u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"\u0426\u0456\u043d\u0430"}),(0,c.jsx)("p",{children:"0.00  USDT"})]})})]})]})})]})]})]}),(0,c.jsx)("div",{className:_().imgContainer,children:(0,c.jsx)("img",{src:"/graph.png",alt:"Trade Image"})})]})]})})}},45682:function(e,n,a){"use strict";function r(e){return"ACTION_REJECTED"==e.code}a.d(n,{C:function(){return s},y:function(){return r}});var s={OPEN:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439",ACTIVE:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",PENDING_APPROVE:"\u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",ARCHIVED:"\u0417\u0430\u0430\u0440\u0445\u0456\u0432\u043e\u0432\u0430\u043d\u0438\u0439"}},935:function(e){e.exports={leftSide:"dashboard_leftSide__96xTE",wrapper:"dashboard_wrapper__yGTjE",balance:"dashboard_balance__gi3UR",mainWrapper:"dashboard_mainWrapper__63PVG",balanceImage:"dashboard_balanceImage__TRZUF",balanceTitle:"dashboard_balanceTitle__EfuE_",balanceAmount:"dashboard_balanceAmount__7wpdD",balanceAmountImage:"dashboard_balanceAmountImage__WgDdQ",balanceAmountText:"dashboard_balanceAmountText__aD7sL",doBalance:"dashboard_doBalance__lex5f",tabs:"dashboard_tabs__4QnSp",tab:"dashboard_tab__JSsPZ",tabText:"dashboard_tabText__Mlg1u",active:"dashboard_active__NfKnB",doBalanceContentText:"dashboard_doBalanceContentText__HMUzt",inputContainer:"dashboard_inputContainer__i0igw",balanceDoInput:"dashboard_balanceDoInput__JnQwd",doBalanceCurrency:"dashboard_doBalanceCurrency__GZ85G",downWrapper:"dashboard_downWrapper__XiZbF",buttonSell:"dashboard_buttonSell__0zUdv",buttonSellText:"dashboard_buttonSellText__Rngbp",imgContainer:"dashboard_imgContainer__EZg5H",fuctionCurrecy:"dashboard_fuctionCurrecy__4Htt3",buttonPlace:"dashboard_buttonPlace__xb6XU"}},47568:function(e,n,a){"use strict";function r(e,n,a,r,s,t,c){try{var i=e[t](c),o=i.value}catch(d){return void a(d)}i.done?n(o):Promise.resolve(o).then(r,s)}function s(e){return function(){var n=this,a=arguments;return new Promise((function(s,t){var c=e.apply(n,a);function i(e){r(c,s,t,i,o,"next",e)}function o(e){r(c,s,t,i,o,"throw",e)}i(void 0)}))}}a.d(n,{Z:function(){return s}})}},function(e){e.O(0,[1664,7971,9496,1952,9774,2888,179],(function(){return n=40528,e(e.s=n);var n}));var n=e.O();_N_E=n}]);