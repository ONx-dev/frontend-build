(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8512],{57837:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project",function(){return t(23693)}])},71322:function(e,s){"use strict";s.Z={src:"/_next/static/media/wallet2.b1435d24.svg",height:24,width:24}},23693:function(e,s,t){"use strict";t.r(s);var n=t(47568),r=t(7297),i=t(70655),c=t(85893),o=t(55850),a=t(17283),d=t(69077),l=t(77849),u=t(45682),_=t(21493),p=t.n(_),j=t(89496),m=t(67294),v=t(22999),g=t(61952),h=t(2593),b=t(21046),x=t(71322),N=t(4798);function f(){var e=(0,r.Z)(['\n        query($user: String) {\n            user(id: $user) {\n                role\n            }\n            projects(\n                where: {\n                    or: [\n                        { owner: $user }\n                        { investor: $user }\n                        { status: "OPEN" }\n                    ]\n                }\n                orderBy: createdAt\n                orderDirection: desc\n                first: 1\n            ) {\n                id\n                name\n                reportLink\n                status\n                spendings {\n                    amount\n                    provider {\n                        id\n                    }\n                    kind\n                    name\n                }\n                descriptionLink\n                budget\n                paymentsTransactionHash\n                owner {\n                    id\n                }\n                investor {\n                    id\n                }\n            }\n        }\n    ']);return f=function(){return e},e}s.default=function(){var e=(0,d.mx)().data,s=(0,d.yL)(),t=(0,d.cq)({address:l.iF.workflow,abi:l._p.workflow,signerOrProvider:e}),r=(0,d.cq)({address:l.iF.onx,abi:l._p.onx,signerOrProvider:s}),_=(0,d.cq)({address:l.iF.onx,abi:l._p.onx,signerOrProvider:e}),T=(0,d.mA)().address,C=(0,d.cq)({address:l.iF.usdt,abi:l._p.usdt,signerOrProvider:s}),P=(0,m.useState)(),w=(P[0],P[1]),q=(0,m.useState)(),k=(q[0],q[1]);(0,m.useEffect)((function(){C.decimals().then((function(e){w(h.O$.from(10).pow(e))})),r.decimals().then((function(e){k(h.O$.from(10).pow(e))}))}),[T]);var y=(0,o.a)((0,a.Ps)(f()),{variables:{user:null===T||void 0===T?void 0:T.toLowerCase()},onCompleted:function(){return O(!1)},onError:function(){return O(!1)}}),I=y.data,A=y.refetch,E=(y.loading,y.called,(0,m.useState)(!0)),L=E[0],O=E[1],S=(0,m.useState)(!1),Z=(S[0],S[1],function(){var e=(0,n.Z)((function(){var e,s;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:e=null===I||void 0===I?void 0:I.projects[0],O(!0),n.label=1;case 1:return n.trys.push([1,9,10,11]),[4,r.allowance(T,t.address)];case 2:return n.sent().lt(b.Bz)?[4,_.approve(t.address,b.Bz)]:[3,5];case 3:return[4,n.sent().wait()];case 4:n.sent(),n.label=5;case 5:return[4,t.fundProject(e.id)];case 6:return[4,n.sent().wait()];case 7:return n.sent(),[4,A()];case 8:return n.sent(),[3,11];case 9:return s=n.sent(),console.error(s),[3,11];case 10:return O(!1),[7];case 11:return[2]}}))}));return function(){return e.apply(this,arguments)}}()),R=function(){var e=(0,n.Z)((function(){var e,s,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:e=null===I||void 0===I?void 0:I.projects[0],s=prompt("Report URL"),O(!0),r.label=1;case 1:return r.trys.push([1,5,6,7]),[4,t.finishProject(e.id,s)];case 2:return[4,r.sent().wait()];case 3:return r.sent(),[4,A()];case 4:return r.sent(),[3,7];case 5:return n=r.sent(),console.error(n),[3,7];case 6:return O(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,n.Z)((function(){var e,s;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:e=null===I||void 0===I?void 0:I.projects[0],O(!0),n.label=1;case 1:return n.trys.push([1,5,6,7]),[4,t.approveProjectFinish(e.id)];case 2:return[4,n.sent().wait()];case 3:return n.sent(),[4,A()];case 4:return n.sent(),[3,7];case 5:return s=n.sent(),console.error(s),[3,7];case 6:return O(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:p().mainWrapper,children:[(0,c.jsx)(j.Z,{}),(0,c.jsxs)("div",{children:[(0,c.jsx)(g.Z,{type:"project",transactionInProcess:L}),(0,c.jsxs)("div",{className:p().content,children:[(0,c.jsx)("div",{className:p().contentImage,children:(0,c.jsx)("img",{src:"/dashboard.png",alt:"Dashboard Image"})}),(0,c.jsxs)("div",{className:p().contentRightSide,children:[(0,c.jsx)("div",{className:p().aboveTitle,children:(0,c.jsx)("div",{className:p().accessible,children:(0,c.jsx)("p",{children:u.C[null===I||void 0===I?void 0:I.projects[0].status]})})}),(0,c.jsxs)("div",{className:p().contentContainer,children:[(0,c.jsx)("h1",{className:p().contentTitle,children:null===I||void 0===I?void 0:I.projects[0].name}),(0,c.jsx)("p",{className:p().contentDescription,children:"\xabONx\xbb - \u0446\u0435 \u0441\u0442\u0430\u0431\u0456\u043b\u044c\u043d\u0430 \u0446\u0438\u0444\u0440\u043e\u0432\u0430 \u043c\u0443\u043b\u044c\u0442\u0438\u0432\u0430\u043b\u044e\u0442\u0430 \u0434\u043b\u044f \u0444\u0456\u043d\u0430\u043d\u0441\u0443\u0432\u0430\u043d\u043d\u044f \u0431\u0443\u0434\u044c-\u044f\u043a\u0438\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0456\u0432 \u0442\u0430 \u0441\u043f\u043b\u0430\u0442\u0438 \u0431\u0443\u0434\u044c-\u044f\u043a\u0438\u0445 \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u0447\u0438 \u043f\u043e\u0441\u043b\u0443\u0433, \u044f\u043a\u043e\u044e \u043c\u043e\u0436\u043d\u0430 \u043e\u0444\u0456\u0446\u0456\u0439\u043d\u043e \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043d\u0430 \u0440\u0456\u0432\u043d\u0456 \u0442\u0440\u0430\u0434\u0438\u0446\u0456\u0439\u043d\u0438\u0445 \u0433\u0440\u043e\u0448\u0435\u0439..."}),(0,c.jsxs)("div",{className:p().budget,children:[(0,c.jsx)("div",{className:p().budgetImage,children:(0,c.jsx)("img",{src:"/count.svg",alt:"Money"})}),(0,c.jsxs)("div",{className:p().budgetContent,children:[(0,c.jsx)("p",{className:p().budgetTitle,children:"\u0411\u044e\u0434\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0443"}),(0,c.jsxs)("div",{className:p().budgetSumWrapper,children:[(0,c.jsx)("p",{className:p().budgetSum,children:null===I||void 0===I?void 0:I.projects[0].budget}),(0,c.jsx)("div",{className:p().budgetCurrency,children:(0,c.jsx)("img",{src:"/currency.svg",alt:""})})]})]}),"OPEN"==(null===I||void 0===I?void 0:I.projects[0].status)&&"INVESTOR"==(null===I||void 0===I?void 0:I.user.role)&&(0,c.jsx)("button",{className:p().budgetButton,onClick:Z,children:"\u0406\u043d\u0432\u0435\u0441\u0442\u0443\u0432\u0430\u0442\u0438"}),"ACTIVE"==(null===I||void 0===I?void 0:I.projects[0].status)&&(null===I||void 0===I?void 0:I.projects[0].owner.id)==(null===T||void 0===T?void 0:T.toLowerCase())&&(0,c.jsx)("button",{className:p().budgetButton,onClick:R,children:"Finish"}),"PENDING_APPROVE"==(null===I||void 0===I?void 0:I.projects[0].status)&&(null===I||void 0===I?void 0:I.projects[0].investor.id)==(null===T||void 0===T?void 0:T.toLowerCase())&&(0,c.jsx)("button",{className:p().budgetButton,onClick:B,children:"Approve"})]})]}),(0,c.jsxs)("div",{className:p().links,children:[(0,c.jsxs)("div",{className:p().business,children:[(0,c.jsx)("div",{className:p().businessImage,children:(0,c.jsx)("img",{src:"/redirect.svg",alt:""})}),(0,c.jsx)("a",{rel:"noopener noreferrer",href:null===I||void 0===I?void 0:I.projects[0].descriptionLink,target:"_blank",className:p().businessLink,children:"Project Description"})]}),(null===I||void 0===I?void 0:I.projects[0].reportLink)&&(0,c.jsx)("div",{className:p().separation}),(null===I||void 0===I?void 0:I.projects[0].reportLink)&&(0,c.jsxs)("div",{className:p().business,children:[(0,c.jsx)("div",{className:p().businessImage,children:(0,c.jsx)("img",{src:"/redirect.svg",alt:""})}),(0,c.jsx)("a",{rel:"noopener noreferrer",href:null===I||void 0===I?void 0:I.projects[0].reportLink,target:"_blank",className:p().businessLink,children:"Finish Report"})]}),(0,c.jsx)("div",{className:p().separation}),(0,c.jsxs)("div",{className:p().email,children:[(0,c.jsx)("div",{className:p().emailImage,children:(0,c.jsx)("img",{src:"/mail.svg",alt:""})}),(0,c.jsx)("a",{href:"#",className:p().emailLink,children:"hello@drugs.bot"})]})]})]})]}),(0,c.jsxs)("div",{className:p().tableRequest,children:[(0,c.jsx)("h2",{className:p().titleRequest,children:"\u0421\u0442\u0430\u0442\u0442\u0456 \u0432\u0438\u0442\u0440\u0430\u0442\u0438"}),(0,c.jsxs)("div",{className:p().requestTitles,children:[(0,c.jsx)("p",{className:p().requestTitle,children:"#"}),(0,c.jsx)("p",{className:p().requestTitle,children:"\u0422\u0438\u043f \u0432\u0438\u0442\u0440\u0430\u0442\u0438"}),(0,c.jsx)("p",{className:p().requestTitle,children:"\u041f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0432\u0438\u0442\u0440\u0430\u0442\u0438"}),(0,c.jsx)("p",{className:p().requestTitle,children:"\u0421\u0443\u043c\u0430"}),(null===I||void 0===I?void 0:I.projects[0].paymentsTransactionHash)&&(0,c.jsx)("p",{className:p().requestTitle,children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,c.jsx)("p",{className:p().requestTitle,children:"\u0413\u0430\u043c\u0430\u043d\u0435\u0446\u044c \u0432\u0438\u043a\u043e\u043d\u0430\u0432\u0446\u044f"})]}),(0,c.jsx)("div",{className:p().requestsField,children:null===I||void 0===I?void 0:I.projects[0].spendings.map((function(e,s){return(0,c.jsxs)("div",{className:p().request,children:[(0,c.jsx)("p",{children:s+1}),(0,c.jsx)("p",{children:e.name}),(0,c.jsx)("p",{children:e.kind}),(0,c.jsxs)("p",{className:p().spendAmount,children:[(0,c.jsx)("p",{children:e.amount}),(0,c.jsx)("div",{className:p().spendAmountCurrency,children:(0,c.jsx)("img",{src:"/currency.svg",alt:"Currency"})})]}),(null===I||void 0===I?void 0:I.projects[0].paymentsTransactionHash)&&(0,c.jsx)("p",{className:p().spendKind,children:(0,c.jsxs)("a",{href:"https://mumbai.polygonscan.com/tx/"+(null===I||void 0===I?void 0:I.projects[0].paymentsTransactionHash),target:"_blank",rel:"noreferrer",children:["\u0421\u043f\u043b\u0430\u0447\u0435\u043d\u043e",(0,c.jsx)("div",{className:p().businessImage,children:(0,c.jsx)("img",{src:"/redirect.svg",alt:""})})]})}),(0,c.jsxs)("div",{className:p().requestAddress,children:[" ",(0,c.jsx)("p",{children:(0,v.Z)(e.provider.id)})," ",(0,c.jsx)("img",{src:x.Z.src,alt:"wallet",className:p().walletPic})]})]},s)}))}),(0,c.jsx)("button",{className:p().spendButton,children:(0,c.jsxs)(N.ZP,{content:"\u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435",children:[(0,c.jsx)("p",{children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0449\u0435"}),(0,c.jsx)("span",{children:"+25"})]})})]})]})]})})}},45682:function(e,s,t){"use strict";function n(e){return"ACTION_REJECTED"==e.code}t.d(s,{C:function(){return r},y:function(){return n}});var r={OPEN:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439",ACTIVE:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",PENDING_APPROVE:"\u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",ARCHIVED:"\u0417\u0430\u0430\u0440\u0445\u0456\u0432\u043e\u0432\u0430\u043d\u0438\u0439"}},21493:function(e){e.exports={leftSide:"project_leftSide__dhf2j",head:"project_head__CDGDW",signWrapper:"project_signWrapper__C1qpP",signPurple:"project_signPurple__JJwyW",contentContainer:"project_contentContainer__F21A0",mainWrapper:"project_mainWrapper__BcayA",signText:"project_signText__E2M38",successMessage:"project_successMessage__vbZbs",successMessageImage:"project_successMessageImage__5_VYp",successMessageTitle:"project_successMessageTitle__sOtC_",successMessageDescription:"project_successMessageDescription__62ca5",successContent:"project_successContent__c6VOu",successMessageClose:"project_successMessageClose__1CIqd",successMessageClosed:"project_successMessageClosed__bZdcV",rightSide:"project_rightSide__trzUq",language:"project_language__0PukJ",profile:"project_profile__rXeve",icon:"project_icon__Znij4",name:"project_name__zzSe0",logOut:"project_logOut__e9PfE",content:"project_content__MmqPb",tableContent:"project_tableContent__J25ti",contentImage:"project_contentImage__G_FK7",contentRightSide:"project_contentRightSide__B0pXa",accessible:"project_accessible__dfFEh",editProject:"project_editProject__2vmI4",editProjectImage:"project_editProjectImage__mGF1N",editProjectText:"project_editProjectText__ReiKv",aboveTitle:"project_aboveTitle__y7oyH",contentTitle:"project_contentTitle__rmFuY",contentDescription:"project_contentDescription__RMWRB",budget:"project_budget__cyJCH",budgetImage:"project_budgetImage__Z9cCG",budgetContent:"project_budgetContent__XBK52",budgetTitle:"project_budgetTitle__ELZvi",budgetSum:"project_budgetSum__j1AoT",budgetCurrency:"project_budgetCurrency__tRJBH",budgetSumWrapper:"project_budgetSumWrapper__SyKj5",links:"project_links__kODDj",business:"project_business__uiAP_",businessImage:"project_businessImage__jVqAo",businessLink:"project_businessLink__KBZqg",email:"project_email__nsM8y",emailImage:"project_emailImage__w4Lab",emailLink:"project_emailLink__vcESR",separation:"project_separation___c5m3",spendingTitle:"project_spendingTitle__TCz18",spending:"project_spending__FeL4L",spendingTitles:"project_spendingTitles__442TT",spend:"project_spend__EAnpv",spendNumber:"project_spendNumber__S0vZI",spendName:"project_spendName__Nkb7e",spendKind:"project_spendKind__B4pkh",spendAmount:"project_spendAmount__a0Y3e",spendAmountNum:"project_spendAmountNum__l1eno",spendAmountCurrency:"project_spendAmountCurrency__ydP3O",spendWrapper:"project_spendWrapper__nHfXI",spendButton:"project_spendButton__iNY2Y",budgetButton:"project_budgetButton__TgLZ5",walletPic:"project_walletPic__Tzkcg",tableRequest:"project_tableRequest__fFGJM",titleRequest:"project_titleRequest__XVNdI",requestTitles:"project_requestTitles__jCusO",requestsField:"project_requestsField__lkrEL",requestTitle:"project_requestTitle__6hH8w",request:"project_request__HC9bB",requestAddress:"project_requestAddress__U1i9b",buttonApprove:"project_buttonApprove__DUl3B",main:"project_main__cUVsU"}},22999:function(e,s){"use strict";var t=/^(0x[a-zA-Z0-9]{4})[a-zA-Z0-9]+([a-zA-Z0-9]{4})$/;s.Z=function(e){var s=e.match(t);return s?s[1]+"\u2026"+s[2]:e}},47568:function(e,s,t){"use strict";function n(e,s,t,n,r,i,c){try{var o=e[i](c),a=o.value}catch(d){return void t(d)}o.done?s(a):Promise.resolve(a).then(n,r)}function r(e){return function(){var s=this,t=arguments;return new Promise((function(r,i){var c=e.apply(s,t);function o(e){n(c,r,i,o,a,"next",e)}function a(e){n(c,r,i,o,a,"throw",e)}o(void 0)}))}}t.d(s,{Z:function(){return r}})}},function(e){e.O(0,[1664,7971,9496,1952,9774,2888,179],(function(){return s=57837,e(e.s=s);var s}));var s=e.O();_N_E=s}]);